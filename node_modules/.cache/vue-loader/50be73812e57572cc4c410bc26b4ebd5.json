{"remainingRequest":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\src\\views\\mine\\contact\\contact.vue?vue&type=style&index=0&id=684e880f&scoped=true&lang=css&","dependencies":[{"path":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\src\\views\\mine\\contact\\contact.vue","mtime":1545182300343},{"path":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\css-loader\\index.js","mtime":1544410009647},{"path":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1544410027083},{"path":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\postcss-loader\\lib\\index.js","mtime":1544410018181},{"path":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1544410008433},{"path":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\vue-loader\\lib\\index.js","mtime":1544410027082}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.addressBook {\r\n  padding-top: 44px;\r\n}\r\n.letter {\r\n  color: #666;\r\n  font-size: 13px;\r\n  line-height: 26px;\r\n  margin-left: 12px;\r\n}\r\n.list {\r\n  display: flex;\r\n  background: #fff;\r\n  padding: 10px 0 0 12px;\r\n}\r\n.tx img {\r\n  width: 38px;\r\n  height: 38px;\r\n  border-radius: 50%;\r\n  margin-right: 17px;\r\n}\r\n.name {\r\n  width: 100%;\r\n  padding-bottom: 8px;\r\n  border-bottom: solid 1px #e5e5e5;\r\n}\r\n.teacher {\r\n  color: #333;\r\n  font-size: 16px;\r\n}\r\n.subject {\r\n  font-size: 13px;\r\n  color: #999;\r\n}\r\n.list:last-child .name {\r\n  border: 0;\r\n}\r\n.number {\r\n  position: fixed;\r\n  top: 20%;\r\n  right: 6px;\r\n  text-align: center;\r\n}\r\n.number li {\r\n  font-size: 9px;\r\n  color: #333;\r\n}\r\n",{"version":3,"sources":["contact.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"contact.vue","sourceRoot":"src\\views\\mine\\contact","sourcesContent":["<template>\r\n  <div class=\"addressBook\">\r\n    <back-button></back-button>\r\n    <van-nav-bar\r\n      title=\"通讯录\"\r\n      left-text=\"返回\"\r\n      right-text=\" \"\r\n      left-arrow\r\n      fixed\r\n      @click-left=\"onClickLeft\"/>\r\n      <van-search v-model=\"userName\" placeholder=\"请输入搜索关键词\" show-action @search=\"onSearch\">\r\n        <div slot=\"action\" @click=\"onSearch\">搜索</div>\r\n      </van-search>\r\n    <ul v-if=\"memberList\">\r\n      <li v-for=\"(item, index) in memberList\" :key = \"index\"  >\r\n        <p class=\"letter\" :id=\"item.letter\" :ref=\"item.letter\">{{item.letter}}</p>\r\n        <ul>\r\n          <li class=\"list\" v-for=\"(i, index) in item.data\" :key = \"index\">\r\n            <div class=\"tx\">\r\n              <img v-if=\"!i.zp\" :src=\"require('@/assets/myedu/xj.png')\" alt>\r\n              <img v-if=\"i.zp\" :src=\"$store.state.system.sftpPath + i.zp\" alt>\r\n            </div>\r\n            <div class=\"name\">\r\n              <p class=\"teacher\">{{i.stuName}}</p>\r\n              <p class=\"subject\">{{i.stuPhone}}</p>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </li>\r\n    </ul>\r\n    <ul class=\"number\" v-if=\"showLetterList\">\r\n      <li v-for=\"(letter, index) in Letters \"  :key = \"index\">\r\n        <a href=\"javascript:void(0)\"\r\n        @click=\"jumper('#'+letter)\"><span>{{letter}}</span></a>\r\n      </li>\r\n    </ul>\r\n    <ul v-if=\"teaList\">\r\n      <li v-for=\"(item, index) in teaList\" :key = \"index\"  >\r\n        <p class=\"letter\" :id=\"item.letter\" :ref=\"item.letter\">{{item.mc}}</p>\r\n        <ul>\r\n          <li class=\"list\" v-for=\"(i, index) in item.data\" :key = \"index\">\r\n            <div class=\"tx\">\r\n              <img v-if=\"!i.zp\" :src=\"require('@/assets/myedu/xj.png')\" alt>\r\n              <img v-if=\"i.zp\" :src=\"$store.state.system.sftpPath + i.sysUser.zp\" alt>\r\n            </div>\r\n            <div class=\"name\">\r\n              <p class=\"teacher\">{{i.sysUser.userName}}</p>\r\n              <p class=\"subject\">{{i.sysUser.phone}}</p>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </li>\r\n    </ul>\r\n    <ul class=\"number\" v-if=\"showLetterList\">\r\n      <li v-for=\"(letter, index) in Letters \"  :key = \"index\">\r\n        <a href=\"javascript:void(0)\"\r\n        @click=\"jumper('#'+letter)\"><span>{{letter}}</span></a>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex';\r\nimport backButton from '@/components/backButton/backButton.vue';\r\nimport { queryClassStuByStu, getOrgUser } from '@/services/mine';\r\n\r\nexport default {\r\n  name: 'completeInfo',\r\n  data() {\r\n    return {\r\n      userName: '',\r\n      userType: 'S',\r\n      memberList: [],\r\n      teaList: [],\r\n      showLetterList: true,\r\n      panelShow: false,\r\n      letter: '',\r\n      Letters: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'],\r\n    };\r\n  },\r\n  components: {\r\n    'back-button': backButton,\r\n  },\r\n  computed: {\r\n    ...mapGetters('system', ['userInfo']),\r\n  },\r\n  methods: {\r\n    pySort(arr, str, type) {\r\n      const letters = 'ABCDEFGHJKLMNOPQRSTWXYZ'.split('');\r\n      const result = [];\r\n      let curr;\r\n      let j;\r\n      let i;\r\n      for (i = 0; i < letters.length; i += 1) {\r\n        curr = { letter: letters[i], data: [], mc: '' };\r\n        for (j = 0; j < arr.length; j += 1) {\r\n          // const firstLetter = pinyinUtil.getFirstLetter(arr[j].Name);\r\n          if (arr[j][str]) {\r\n            const initial = arr[j][str].charAt(0);\r\n            if (initial === letters[i] || initial === letters[i].toLowerCase()) {\r\n              curr.data.push(arr[j]);\r\n              if (type === 'T') {\r\n                curr.mc = arr[j].sysDept.dWMC;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        if (curr.data.length) {\r\n          result.push(curr);\r\n        }\r\n      }\r\n      return result;\r\n    },\r\n    onSearch() {\r\n      if (this.userType === 'T') {\r\n        this.getOrgUser();\r\n      } else {\r\n        this.queryClassStuByStu();\r\n      }\r\n    },\r\n    onClickLeft() {\r\n      this.$router.go(-1);\r\n    },\r\n    // 字母索引锚点定位\r\n    jumper(key) {\r\n      const anchor = this.$el.querySelector(key);\r\n      if (anchor) {\r\n        document.documentElement.scrollTop = anchor.offsetTop;\r\n      }\r\n    },\r\n    async queryClassStuByStu() {\r\n      const { data } = await\r\n      queryClassStuByStu({ stuId: this.userInfo.id, userName: this.userName });\r\n      this.memberList = this.pySort(data, 'namePinyin', 'S');\r\n    },\r\n    async getOrgUser() {\r\n      const { data } = await getOrgUser({ userName: this.userName });\r\n      this.teaList = this.pySort(data, 'deptPingYin', 'T');\r\n    },\r\n  },\r\n  mounted() {\r\n    if (this.userInfo.userType === '1' || this.userInfo.userType === '6') {\r\n      this.queryClassStuByStu();\r\n      this.userType = 'S';\r\n    } else if (this.userInfo.userType === '2' || this.userInfo.userType === '3'\r\n      || this.userInfo.userType === '4' || this.userInfo.userType === '5') {\r\n      this.getOrgUser();\r\n      this.userType = 'T';\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.addressBook {\r\n  padding-top: 44px;\r\n}\r\n.letter {\r\n  color: #666;\r\n  font-size: 13px;\r\n  line-height: 26px;\r\n  margin-left: 12px;\r\n}\r\n.list {\r\n  display: flex;\r\n  background: #fff;\r\n  padding: 10px 0 0 12px;\r\n}\r\n.tx img {\r\n  width: 38px;\r\n  height: 38px;\r\n  border-radius: 50%;\r\n  margin-right: 17px;\r\n}\r\n.name {\r\n  width: 100%;\r\n  padding-bottom: 8px;\r\n  border-bottom: solid 1px #e5e5e5;\r\n}\r\n.teacher {\r\n  color: #333;\r\n  font-size: 16px;\r\n}\r\n.subject {\r\n  font-size: 13px;\r\n  color: #999;\r\n}\r\n.list:last-child .name {\r\n  border: 0;\r\n}\r\n.number {\r\n  position: fixed;\r\n  top: 20%;\r\n  right: 6px;\r\n  text-align: center;\r\n}\r\n.number li {\r\n  font-size: 9px;\r\n  color: #333;\r\n}\r\n</style>\r\n"]}]}