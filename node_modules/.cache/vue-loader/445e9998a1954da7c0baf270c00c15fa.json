{"remainingRequest":"E:\\QF\\H5-vue\\school\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\QF\\H5-vue\\school\\src\\views\\login\\login.vue?vue&type=style&index=0&id=699e5889&lang=scss&scoped=true&","dependencies":[{"path":"E:\\QF\\H5-vue\\school\\src\\views\\login\\login.vue","mtime":1542959193466},{"path":"E:\\QF\\H5-vue\\school\\node_modules\\css-loader\\index.js","mtime":1535070530856},{"path":"E:\\QF\\H5-vue\\school\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1539569642393},{"path":"E:\\QF\\H5-vue\\school\\node_modules\\postcss-loader\\lib\\index.js","mtime":1535070531973},{"path":"E:\\QF\\H5-vue\\school\\node_modules\\sass-loader\\lib\\loader.js","mtime":1537144517062},{"path":"E:\\QF\\H5-vue\\school\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1535070530521},{"path":"E:\\QF\\H5-vue\\school\\node_modules\\vue-loader\\lib\\index.js","mtime":1539569642393}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.login {\r\n    height: 100%;\r\n    width: 100%;\r\n    background:url('../../assets/login/bj@2x.png') no-repeat;\r\n    background-size: cover;\r\n    background-attachment: fixed;\r\n    opacity: 0.8;\r\n    background-color: rgba(27,24,26,0.8);\r\n    padding: 106px 10px 30px;\r\n    .logo{\r\n      padding: 0 30px 55px;\r\n    }\r\n    p{\r\n      color: #ff5757;\r\n      font-size: 14px;\r\n      margin: 10px;\r\n    }\r\n    .form {\r\n      width: 85%;\r\n      margin: 0 auto;\r\n      .primary{\r\n        color: #abaeb4;\r\n      }\r\n      .username{\r\n        margin-bottom: 18px;\r\n      }\r\n      input {\r\n        border: 0;\r\n        width: 70%;\r\n        outline: 0;\r\n        font-size: 16px;\r\n        width: 100%;\r\n        padding: 19px 16px;\r\n        caret-color:#1890ff;\r\n      }\r\n      .forget{\r\n        color: #fefefe;\r\n        font-size: 14px;\r\n        padding: 16px 0;\r\n        text-align: right;\r\n      }\r\n      .btn-group{\r\n        margin: 10px 0;\r\n        .btn{\r\n            font-size: 17px;\r\n            margin: 0 auto 15px;\r\n            border-radius: 30px;\r\n            height: 6.8vh;\r\n            line-height: 6.8vh;\r\n            background-color: #FFFFFF;\r\n            color: #1890ff;\r\n            border: 1px solid #1890FF;\r\n        }\r\n        .blue{\r\n            background-color: #1890ff;\r\n            color: #FFFFFF;\r\n        }\r\n      }\r\n    }\r\n    .foot{\r\n      margin-top: 130px;\r\n      text-align: center;\r\n      font-size: 11px;\r\n      color:rgba(203, 203, 203, 0.2);\r\n    }\r\n}\r\n",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src\\views\\login","sourcesContent":["<template>\r\n  <div class=\"login\">\r\n    <div class=\"logo\">\r\n      <!-- <img src=\"../../assets/login/logo@2x.png\" alt=\"logo\"> -->\r\n      <img src=\"../../assets/login/cz-logo.png\" alt=\"cz-logo\">\r\n    </div>\r\n      <div class=\"form\">\r\n        <input type=\"text\" @focus=\"diserror\" v-model=\"info.account\" class=\"username\"\r\n         required placeholder=\"请输入您的账号\">\r\n        <input type=\"password\" @focus=\"diserror\" v-model=\"info.password\" class=\"pwd\"\r\n         required placeholder=\"请输入您的密码\">\r\n        <p v-if=\"error\">账号或密码错误！</p>\r\n        <router-link :to=\"{ name: 'forgot'}\">\r\n          <p class=\"forget\">忘记密码？</p>\r\n        </router-link>\r\n        <div class=\"btn-group\">\r\n          <van-button size=\"large\" class=\"btn blue\" @click=\"submit()\">登录</van-button>\r\n        </div>\r\n      </div>\r\n    <div class=\"foot\">青峰软件有限公司提供技术支持</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { login, getUserInfo } from '@/services/api';\r\n\r\nexport default {\r\n  name: 'login',\r\n  data() {\r\n    return {\r\n      error: false,\r\n      info: {\r\n        account: '',\r\n        password: '',\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    diserror() {\r\n      this.psdError = false;\r\n    },\r\n    async login() {\r\n      const data = await login(this.info);\r\n      if (data && (data.httpCode === 200 || data.httpCode === '200')) {\r\n        this.$toast('登录成功！');\r\n        // 交校\r\n        // this.$store.dispatch('system/setToken', data.__vt_param__);\r\n        // window.localStorage.setItem('token', data.__vt_param__);\r\n        // this.getUserInfo();\r\n        // 财专v1\r\n        this.$store.dispatch('system/setToken', data.data.accessToken);\r\n        this.$store.dispatch('system/setUserInfo', data.data.user);\r\n        this.$store.dispatch('system/setMenu', data.data.menus);\r\n        window.localStorage.setItem('accessToken', data.data.accessToken);\r\n        window.localStorage.setItem('userType', data.data.userType);\r\n        if (data.data.userType === '1' || data.data.userType === '6') {\r\n          this.$router.push('homeStu');\r\n        } else if (data.data.userType === '2' || data.data.userType === '3'\r\n         || data.data.userType === '4' || data.data.userType === '5') {\r\n          this.$router.push('homeTea');\r\n        }\r\n        // 财专v2\r\n      } else if (!data) {\r\n        this.$toast('请求错误，请重新登录！');\r\n      } else if (data && (data.httpCode === 303 || data.httpCode === '303')) {\r\n        this.error = true;\r\n      }\r\n    },\r\n    async getUserInfo() {\r\n      const data = await getUserInfo();\r\n      if (data && (data.httpCode === 200 || data.httpCode === '200')) {\r\n        this.$store.dispatch('system/setUserInfo', data.data.user);\r\n        this.$store.dispatch('system/setMenu', data.data.menus);\r\n        window.localStorage.setItem('userType', data.data.userType);\r\n        if (data.data.userType === '1' || data.data.userType === '6') {\r\n          this.$router.push('homeStu');\r\n        } else if (data.data.userType === '2' || data.data.userType === '3'\r\n         || data.data.userType === '4' || data.data.userType === '5') {\r\n          this.$router.push('homeTea');\r\n        }\r\n      } else {\r\n        this.$toast('服务器错误，请重新登录！');\r\n      }\r\n    },\r\n    submit() {\r\n      if (this.info.account === '') {\r\n        this.$toast('请输入您的账号！');\r\n        return;\r\n      } else if (this.info.password === '') {\r\n        this.$toast('请输入您的密码！');\r\n        return;\r\n      }\r\n      this.login();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.login {\r\n    height: 100%;\r\n    width: 100%;\r\n    background:url('../../assets/login/bj@2x.png') no-repeat;\r\n    background-size: cover;\r\n    background-attachment: fixed;\r\n    opacity: 0.8;\r\n    background-color: rgba(27,24,26,0.8);\r\n    padding: 106px 10px 30px;\r\n    .logo{\r\n      padding: 0 30px 55px;\r\n    }\r\n    p{\r\n      color: #ff5757;\r\n      font-size: 14px;\r\n      margin: 10px;\r\n    }\r\n    .form {\r\n      width: 85%;\r\n      margin: 0 auto;\r\n      .primary{\r\n        color: #abaeb4;\r\n      }\r\n      .username{\r\n        margin-bottom: 18px;\r\n      }\r\n      input {\r\n        border: 0;\r\n        width: 70%;\r\n        outline: 0;\r\n        font-size: 16px;\r\n        width: 100%;\r\n        padding: 19px 16px;\r\n        caret-color:#1890ff;\r\n      }\r\n      .forget{\r\n        color: #fefefe;\r\n        font-size: 14px;\r\n        padding: 16px 0;\r\n        text-align: right;\r\n      }\r\n      .btn-group{\r\n        margin: 10px 0;\r\n        .btn{\r\n            font-size: 17px;\r\n            margin: 0 auto 15px;\r\n            border-radius: 30px;\r\n            height: 6.8vh;\r\n            line-height: 6.8vh;\r\n            background-color: #FFFFFF;\r\n            color: #1890ff;\r\n            border: 1px solid #1890FF;\r\n        }\r\n        .blue{\r\n            background-color: #1890ff;\r\n            color: #FFFFFF;\r\n        }\r\n      }\r\n    }\r\n    .foot{\r\n      margin-top: 130px;\r\n      text-align: center;\r\n      font-size: 11px;\r\n      color:rgba(203, 203, 203, 0.2);\r\n    }\r\n}\r\n</style>\r\n"]}]}