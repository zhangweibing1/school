{"remainingRequest":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\babel-loader\\lib\\index.js!F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\src\\views\\login\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\src\\views\\login\\login.vue","mtime":1544779223530},{"path":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1544410008433},{"path":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\babel-loader\\lib\\index.js","mtime":1544410008076},{"path":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1544410008433},{"path":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\vue-loader\\lib\\index.js","mtime":1544410027082}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"F:\\\\\\u9752\\u5CF0\\u8F6F\\u4EF6\\\\\\u901A\\u7528\\u5E73\\u53F0\\\\2018\\u6559\\u52A1\\\\vueProject\\\\school\\\\node_modules\\\\@vue\\\\babel-preset-app\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { login as _login, getUserInfo as _getUserInfo } from '@/services/api';\nexport default {\n  name: 'login',\n  data: function data() {\n    return {\n      error: false,\n      info: {\n        account: '',\n        password: ''\n      }\n    };\n  },\n  methods: {\n    diserror: function diserror() {\n      this.psdError = false;\n    },\n    login: function () {\n      var _login2 = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var data;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _login(this.info);\n\n              case 2:\n                data = _context.sent;\n\n                if (data && (data.httpCode === 200 || data.httpCode === '200')) {\n                  this.$toast('登录成功！'); // 交校\n\n                  this.$store.dispatch('system/setToken', data.__vt_param__);\n                  window.localStorage.setItem('token', data.__vt_param__);\n                  this.getUserInfo(); // 财专v1\n                  // this.$store.dispatch('system/setToken', data.data.accessToken);\n                  // this.$store.dispatch('system/setUserInfo', data.data.user);\n                  // this.$store.dispatch('system/setMenu', data.data.menus);\n                  // window.localStorage.setItem('accessToken', data.data.accessToken);\n                  // window.localStorage.setItem('userType', data.data.userType);\n                  // if (data.data.userType === '1' || data.data. === '6') {\n                  //   this.$router.push('homeStu');\n                  // } else if (data.data.userType === '2' || data.data.userType === '3'\n                  //  || data.data.userType === '4' || data.data.userType === '5') {\n                  //   this.$router.push('homeTea');\n                  // }\n                  // 财专v2\n                } else if (!data) {\n                  this.$toast('请求错误，请重新登录！');\n                } else if (data && (data.httpCode === 303 || data.httpCode === '303')) {\n                  this.error = true;\n                }\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function login() {\n        return _login2.apply(this, arguments);\n      };\n    }(),\n    getUserInfo: function () {\n      var _getUserInfo2 = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var data;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _getUserInfo();\n\n              case 2:\n                data = _context2.sent;\n\n                if (data && (data.httpCode === 200 || data.httpCode === '200')) {\n                  this.$store.dispatch('system/setUserInfo', data.data);\n                  this.$store.dispatch('system/setMenu', data.data.menus);\n                  window.localStorage.setItem('userType', data.data.userType);\n                  this.$router.push('home');\n                } else {\n                  this.$toast('服务器错误，请重新登录！');\n                }\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function getUserInfo() {\n        return _getUserInfo2.apply(this, arguments);\n      };\n    }(),\n    submit: function submit() {\n      if (this.info.account === '') {\n        this.$toast('请输入您的账号！');\n        return;\n      } else if (this.info.password === '') {\n        this.$toast('请输入您的密码！');\n        return;\n      }\n\n      this.login();\n    }\n  }\n};",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,SAAA,eAAA,EAAA,2BAAA,QAAA,gBAAA;AAEA,eAAA;AACA,QAAA,OADA;AAEA,MAFA,kBAEA;AACA,WAAA;AACA,aAAA,KADA;AAEA,YAAA;AACA,iBAAA,EADA;AAEA,kBAAA;AAFA;AAFA,KAAA;AAOA,GAVA;AAWA,WAAA;AACA,YADA,sBACA;AACA,WAAA,QAAA,GAAA,KAAA;AACA,KAHA;AAIA,SAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAKA,OAAA,KAAA,IAAA,CALA;;AAAA;AAKA,oBALA;;AAMA,oBAAA,SAAA,KAAA,QAAA,KAAA,GAAA,IAAA,KAAA,QAAA,KAAA,KAAA,CAAA,EAAA;AACA,uBAAA,MAAA,CAAA,OAAA,EADA,CAEA;;AACA,uBAAA,MAAA,CAAA,QAAA,CAAA,iBAAA,EAAA,KAAA,YAAA;AACA,yBAAA,YAAA,CAAA,OAAA,CAAA,OAAA,EAAA,KAAA,YAAA;AACA,uBAAA,WAAA,GALA,CAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAnBA,MAmBA,IAAA,CAAA,IAAA,EAAA;AACA,uBAAA,MAAA,CAAA,aAAA;AACA,iBAFA,MAEA,IAAA,SAAA,KAAA,QAAA,KAAA,GAAA,IAAA,KAAA,QAAA,KAAA,KAAA,CAAA,EAAA;AACA,uBAAA,KAAA,GAAA,IAAA;AACA;;AA7BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AA+BA,eA/BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAgCA,cAhCA;;AAAA;AAgCA,oBAhCA;;AAiCA,oBAAA,SAAA,KAAA,QAAA,KAAA,GAAA,IAAA,KAAA,QAAA,KAAA,KAAA,CAAA,EAAA;AACA,uBAAA,MAAA,CAAA,QAAA,CAAA,oBAAA,EAAA,KAAA,IAAA;AACA,uBAAA,MAAA,CAAA,QAAA,CAAA,gBAAA,EAAA,KAAA,IAAA,CAAA,KAAA;AACA,yBAAA,YAAA,CAAA,OAAA,CAAA,UAAA,EAAA,KAAA,IAAA,CAAA,QAAA;AACA,uBAAA,OAAA,CAAA,IAAA,CAAA,MAAA;AACA,iBALA,MAKA;AACA,uBAAA,MAAA,CAAA,cAAA;AACA;;AAxCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AA0CA,UA1CA,oBA0CA;AACA,UAAA,KAAA,IAAA,CAAA,OAAA,KAAA,EAAA,EAAA;AACA,aAAA,MAAA,CAAA,UAAA;AACA;AACA,OAHA,MAGA,IAAA,KAAA,IAAA,CAAA,QAAA,KAAA,EAAA,EAAA;AACA,aAAA,MAAA,CAAA,UAAA;AACA;AACA;;AACA,WAAA,KAAA;AACA;AAnDA;AAXA,CAAA","sourcesContent":["<template>\r\n  <div class=\"login\">\r\n    <div class=\"logo\" style=\"text-align:center;\">\r\n      <!-- <img src=\"../../assets/login/logo@2x.png\" alt=\"logo\"> -->\r\n      <img src=\"../../assets/login/logo2.png\" style=\"width:76px;height:60px\" alt=\"cz-logo\">\r\n      <p style=\"font-size:20px;color:#fff;font-family:微软雅黑\">青峰教务平台</p>\r\n    </div>\r\n      <div class=\"form\">\r\n        <input type=\"text\" @focus=\"diserror\" v-model=\"info.account\" class=\"username\"\r\n         required placeholder=\"请输入您的账号\">\r\n        <input type=\"password\" @focus=\"diserror\" v-model=\"info.password\" class=\"pwd\"\r\n         required placeholder=\"请输入您的密码\">\r\n        <p v-if=\"error\">账号或密码错误！</p>\r\n        <router-link :to=\"{ name: 'forgotNew'}\">\r\n          <p class=\"forget\">忘记密码？</p>\r\n        </router-link>\r\n        <div class=\"btn-group\">\r\n          <van-button size=\"large\" class=\"btn blue\" @click=\"submit()\">登录</van-button>\r\n        </div>\r\n      </div>\r\n    <div class=\"foot\">青峰软件股份有限公司提供技术支持</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { login, getUserInfo } from '@/services/api';\r\n\r\nexport default {\r\n  name: 'login',\r\n  data() {\r\n    return {\r\n      error: false,\r\n      info: {\r\n        account: '',\r\n        password: '',\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    diserror() {\r\n      this.psdError = false;\r\n    },\r\n    async login() {\r\n      const data = await login(this.info);\r\n      if (data && (data.httpCode === 200 || data.httpCode === '200')) {\r\n        this.$toast('登录成功！');\r\n        // 交校\r\n        this.$store.dispatch('system/setToken', data.__vt_param__);\r\n        window.localStorage.setItem('token', data.__vt_param__);\r\n        this.getUserInfo();\r\n        // 财专v1\r\n        // this.$store.dispatch('system/setToken', data.data.accessToken);\r\n        // this.$store.dispatch('system/setUserInfo', data.data.user);\r\n        // this.$store.dispatch('system/setMenu', data.data.menus);\r\n        // window.localStorage.setItem('accessToken', data.data.accessToken);\r\n        // window.localStorage.setItem('userType', data.data.userType);\r\n        // if (data.data.userType === '1' || data.data. === '6') {\r\n        //   this.$router.push('homeStu');\r\n        // } else if (data.data.userType === '2' || data.data.userType === '3'\r\n        //  || data.data.userType === '4' || data.data.userType === '5') {\r\n        //   this.$router.push('homeTea');\r\n        // }\r\n        // 财专v2\r\n      } else if (!data) {\r\n        this.$toast('请求错误，请重新登录！');\r\n      } else if (data && (data.httpCode === 303 || data.httpCode === '303')) {\r\n        this.error = true;\r\n      }\r\n    },\r\n    async getUserInfo() {\r\n      const data = await getUserInfo();\r\n      if (data && (data.httpCode === 200 || data.httpCode === '200')) {\r\n        this.$store.dispatch('system/setUserInfo', data.data);\r\n        this.$store.dispatch('system/setMenu', data.data.menus);\r\n        window.localStorage.setItem('userType', data.data.userType);\r\n        this.$router.push('home');\r\n      } else {\r\n        this.$toast('服务器错误，请重新登录！');\r\n      }\r\n    },\r\n    submit() {\r\n      if (this.info.account === '') {\r\n        this.$toast('请输入您的账号！');\r\n        return;\r\n      } else if (this.info.password === '') {\r\n        this.$toast('请输入您的密码！');\r\n        return;\r\n      }\r\n      this.login();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.login {\r\n    height: 100%;\r\n    width: 100%;\r\n    background:url('../../assets/login/bj@2x.png') no-repeat;\r\n    background-size: cover;\r\n    background-attachment: fixed;\r\n    opacity: 0.8;\r\n    background-color: rgba(27,24,26,0.8);\r\n    padding: 106px 10px 30px;\r\n    .logo{\r\n      padding: 0 30px 55px;\r\n    }\r\n    p{\r\n      color: #ff5757;\r\n      font-size: 14px;\r\n      margin: 10px;\r\n    }\r\n    .form {\r\n      width: 85%;\r\n      margin: 0 auto;\r\n      .primary{\r\n        color: #abaeb4;\r\n      }\r\n      .username{\r\n        margin-bottom: 18px;\r\n      }\r\n      input {\r\n        border: 0;\r\n        width: 70%;\r\n        outline: 0;\r\n        font-size: 16px;\r\n        width: 100%;\r\n        padding: 19px 16px;\r\n        caret-color:#1890ff;\r\n      }\r\n      .forget{\r\n        color: #fefefe;\r\n        font-size: 14px;\r\n        padding: 16px 0;\r\n        text-align: right;\r\n      }\r\n      .btn-group{\r\n        margin: 10px 0;\r\n        .btn{\r\n            font-size: 17px;\r\n            margin: 0 auto 15px;\r\n            border-radius: 30px;\r\n            height: 6.8vh;\r\n            line-height: 6.8vh;\r\n            background-color: #FFFFFF;\r\n            color: #1890ff;\r\n            border: 1px solid #1890FF;\r\n        }\r\n        .blue{\r\n            background-color: #1890ff;\r\n            color: #FFFFFF;\r\n        }\r\n      }\r\n    }\r\n    .foot{\r\n      margin-top: 130px;\r\n      text-align: center;\r\n      font-size: 11px;\r\n      color:rgba(203, 203, 203, 0.2);\r\n    }\r\n}\r\n</style>\r\n"],"sourceRoot":"src\\views\\login"}]}