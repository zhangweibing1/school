{"remainingRequest":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\babel-loader\\lib\\index.js!F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\src\\views\\mine\\contact\\contact.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\src\\views\\mine\\contact\\contact.vue","mtime":1545182300343},{"path":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1544410008433},{"path":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\babel-loader\\lib\\index.js","mtime":1544410008076},{"path":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1544410008433},{"path":"F:\\青峰软件\\通用平台\\2018教务\\vueProject\\school\\node_modules\\vue-loader\\lib\\index.js","mtime":1544410027082}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"F:\\\\\\u9752\\u5CF0\\u8F6F\\u4EF6\\\\\\u901A\\u7528\\u5E73\\u53F0\\\\2018\\u6559\\u52A1\\\\vueProject\\\\school\\\\node_modules\\\\@vue\\\\babel-preset-app\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/asyncToGenerator\";\nimport \"core-js/modules/es6.regexp.split\";\nimport _objectSpread from \"F:\\\\\\u9752\\u5CF0\\u8F6F\\u4EF6\\\\\\u901A\\u7528\\u5E73\\u53F0\\\\2018\\u6559\\u52A1\\\\vueProject\\\\school\\\\node_modules\\\\@vue\\\\babel-preset-app\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters } from 'vuex';\nimport backButton from '@/components/backButton/backButton.vue';\nimport { queryClassStuByStu as _queryClassStuByStu, getOrgUser as _getOrgUser } from '@/services/mine';\nexport default {\n  name: 'completeInfo',\n  data: function data() {\n    return {\n      userName: '',\n      userType: 'S',\n      memberList: [],\n      teaList: [],\n      showLetterList: true,\n      panelShow: false,\n      letter: '',\n      Letters: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']\n    };\n  },\n  components: {\n    'back-button': backButton\n  },\n  computed: _objectSpread({}, mapGetters('system', ['userInfo'])),\n  methods: {\n    pySort: function pySort(arr, str, type) {\n      var letters = 'ABCDEFGHJKLMNOPQRSTWXYZ'.split('');\n      var result = [];\n      var curr;\n      var j;\n      var i;\n\n      for (i = 0; i < letters.length; i += 1) {\n        curr = {\n          letter: letters[i],\n          data: [],\n          mc: ''\n        };\n\n        for (j = 0; j < arr.length; j += 1) {\n          // const firstLetter = pinyinUtil.getFirstLetter(arr[j].Name);\n          if (arr[j][str]) {\n            var initial = arr[j][str].charAt(0);\n\n            if (initial === letters[i] || initial === letters[i].toLowerCase()) {\n              curr.data.push(arr[j]);\n\n              if (type === 'T') {\n                curr.mc = arr[j].sysDept.dWMC;\n              }\n            }\n          }\n        }\n\n        if (curr.data.length) {\n          result.push(curr);\n        }\n      }\n\n      return result;\n    },\n    onSearch: function onSearch() {\n      if (this.userType === 'T') {\n        this.getOrgUser();\n      } else {\n        this.queryClassStuByStu();\n      }\n    },\n    onClickLeft: function onClickLeft() {\n      this.$router.go(-1);\n    },\n    // 字母索引锚点定位\n    jumper: function jumper(key) {\n      var anchor = this.$el.querySelector(key);\n\n      if (anchor) {\n        document.documentElement.scrollTop = anchor.offsetTop;\n      }\n    },\n    queryClassStuByStu: function () {\n      var _queryClassStuByStu2 = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _ref, data;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _queryClassStuByStu({\n                  stuId: this.userInfo.id,\n                  userName: this.userName\n                });\n\n              case 2:\n                _ref = _context.sent;\n                data = _ref.data;\n                this.memberList = this.pySort(data, 'namePinyin', 'S');\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function queryClassStuByStu() {\n        return _queryClassStuByStu2.apply(this, arguments);\n      };\n    }(),\n    getOrgUser: function () {\n      var _getOrgUser2 = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var _ref2, data;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _getOrgUser({\n                  userName: this.userName\n                });\n\n              case 2:\n                _ref2 = _context2.sent;\n                data = _ref2.data;\n                this.teaList = this.pySort(data, 'deptPingYin', 'T');\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function getOrgUser() {\n        return _getOrgUser2.apply(this, arguments);\n      };\n    }()\n  },\n  mounted: function mounted() {\n    if (this.userInfo.userType === '1' || this.userInfo.userType === '6') {\n      this.queryClassStuByStu();\n      this.userType = 'S';\n    } else if (this.userInfo.userType === '2' || this.userInfo.userType === '3' || this.userInfo.userType === '4' || this.userInfo.userType === '5') {\n      this.getOrgUser();\n      this.userType = 'T';\n    }\n  }\n};",{"version":3,"sources":["contact.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"addressBook\">\r\n    <back-button></back-button>\r\n    <van-nav-bar\r\n      title=\"通讯录\"\r\n      left-text=\"返回\"\r\n      right-text=\" \"\r\n      left-arrow\r\n      fixed\r\n      @click-left=\"onClickLeft\"/>\r\n      <van-search v-model=\"userName\" placeholder=\"请输入搜索关键词\" show-action @search=\"onSearch\">\r\n        <div slot=\"action\" @click=\"onSearch\">搜索</div>\r\n      </van-search>\r\n    <ul v-if=\"memberList\">\r\n      <li v-for=\"(item, index) in memberList\" :key = \"index\"  >\r\n        <p class=\"letter\" :id=\"item.letter\" :ref=\"item.letter\">{{item.letter}}</p>\r\n        <ul>\r\n          <li class=\"list\" v-for=\"(i, index) in item.data\" :key = \"index\">\r\n            <div class=\"tx\">\r\n              <img v-if=\"!i.zp\" :src=\"require('@/assets/myedu/xj.png')\" alt>\r\n              <img v-if=\"i.zp\" :src=\"$store.state.system.sftpPath + i.zp\" alt>\r\n            </div>\r\n            <div class=\"name\">\r\n              <p class=\"teacher\">{{i.stuName}}</p>\r\n              <p class=\"subject\">{{i.stuPhone}}</p>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </li>\r\n    </ul>\r\n    <ul class=\"number\" v-if=\"showLetterList\">\r\n      <li v-for=\"(letter, index) in Letters \"  :key = \"index\">\r\n        <a href=\"javascript:void(0)\"\r\n        @click=\"jumper('#'+letter)\"><span>{{letter}}</span></a>\r\n      </li>\r\n    </ul>\r\n    <ul v-if=\"teaList\">\r\n      <li v-for=\"(item, index) in teaList\" :key = \"index\"  >\r\n        <p class=\"letter\" :id=\"item.letter\" :ref=\"item.letter\">{{item.mc}}</p>\r\n        <ul>\r\n          <li class=\"list\" v-for=\"(i, index) in item.data\" :key = \"index\">\r\n            <div class=\"tx\">\r\n              <img v-if=\"!i.zp\" :src=\"require('@/assets/myedu/xj.png')\" alt>\r\n              <img v-if=\"i.zp\" :src=\"$store.state.system.sftpPath + i.sysUser.zp\" alt>\r\n            </div>\r\n            <div class=\"name\">\r\n              <p class=\"teacher\">{{i.sysUser.userName}}</p>\r\n              <p class=\"subject\">{{i.sysUser.phone}}</p>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </li>\r\n    </ul>\r\n    <ul class=\"number\" v-if=\"showLetterList\">\r\n      <li v-for=\"(letter, index) in Letters \"  :key = \"index\">\r\n        <a href=\"javascript:void(0)\"\r\n        @click=\"jumper('#'+letter)\"><span>{{letter}}</span></a>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex';\r\nimport backButton from '@/components/backButton/backButton.vue';\r\nimport { queryClassStuByStu, getOrgUser } from '@/services/mine';\r\n\r\nexport default {\r\n  name: 'completeInfo',\r\n  data() {\r\n    return {\r\n      userName: '',\r\n      userType: 'S',\r\n      memberList: [],\r\n      teaList: [],\r\n      showLetterList: true,\r\n      panelShow: false,\r\n      letter: '',\r\n      Letters: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'],\r\n    };\r\n  },\r\n  components: {\r\n    'back-button': backButton,\r\n  },\r\n  computed: {\r\n    ...mapGetters('system', ['userInfo']),\r\n  },\r\n  methods: {\r\n    pySort(arr, str, type) {\r\n      const letters = 'ABCDEFGHJKLMNOPQRSTWXYZ'.split('');\r\n      const result = [];\r\n      let curr;\r\n      let j;\r\n      let i;\r\n      for (i = 0; i < letters.length; i += 1) {\r\n        curr = { letter: letters[i], data: [], mc: '' };\r\n        for (j = 0; j < arr.length; j += 1) {\r\n          // const firstLetter = pinyinUtil.getFirstLetter(arr[j].Name);\r\n          if (arr[j][str]) {\r\n            const initial = arr[j][str].charAt(0);\r\n            if (initial === letters[i] || initial === letters[i].toLowerCase()) {\r\n              curr.data.push(arr[j]);\r\n              if (type === 'T') {\r\n                curr.mc = arr[j].sysDept.dWMC;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        if (curr.data.length) {\r\n          result.push(curr);\r\n        }\r\n      }\r\n      return result;\r\n    },\r\n    onSearch() {\r\n      if (this.userType === 'T') {\r\n        this.getOrgUser();\r\n      } else {\r\n        this.queryClassStuByStu();\r\n      }\r\n    },\r\n    onClickLeft() {\r\n      this.$router.go(-1);\r\n    },\r\n    // 字母索引锚点定位\r\n    jumper(key) {\r\n      const anchor = this.$el.querySelector(key);\r\n      if (anchor) {\r\n        document.documentElement.scrollTop = anchor.offsetTop;\r\n      }\r\n    },\r\n    async queryClassStuByStu() {\r\n      const { data } = await\r\n      queryClassStuByStu({ stuId: this.userInfo.id, userName: this.userName });\r\n      this.memberList = this.pySort(data, 'namePinyin', 'S');\r\n    },\r\n    async getOrgUser() {\r\n      const { data } = await getOrgUser({ userName: this.userName });\r\n      this.teaList = this.pySort(data, 'deptPingYin', 'T');\r\n    },\r\n  },\r\n  mounted() {\r\n    if (this.userInfo.userType === '1' || this.userInfo.userType === '6') {\r\n      this.queryClassStuByStu();\r\n      this.userType = 'S';\r\n    } else if (this.userInfo.userType === '2' || this.userInfo.userType === '3'\r\n      || this.userInfo.userType === '4' || this.userInfo.userType === '5') {\r\n      this.getOrgUser();\r\n      this.userType = 'T';\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.addressBook {\r\n  padding-top: 44px;\r\n}\r\n.letter {\r\n  color: #666;\r\n  font-size: 13px;\r\n  line-height: 26px;\r\n  margin-left: 12px;\r\n}\r\n.list {\r\n  display: flex;\r\n  background: #fff;\r\n  padding: 10px 0 0 12px;\r\n}\r\n.tx img {\r\n  width: 38px;\r\n  height: 38px;\r\n  border-radius: 50%;\r\n  margin-right: 17px;\r\n}\r\n.name {\r\n  width: 100%;\r\n  padding-bottom: 8px;\r\n  border-bottom: solid 1px #e5e5e5;\r\n}\r\n.teacher {\r\n  color: #333;\r\n  font-size: 16px;\r\n}\r\n.subject {\r\n  font-size: 13px;\r\n  color: #999;\r\n}\r\n.list:last-child .name {\r\n  border: 0;\r\n}\r\n.number {\r\n  position: fixed;\r\n  top: 20%;\r\n  right: 6px;\r\n  text-align: center;\r\n}\r\n.number li {\r\n  font-size: 9px;\r\n  color: #333;\r\n}\r\n</style>\r\n"],"sourceRoot":"src\\views\\mine\\contact"}]}